# Payment Service Environment Configuration
# Copy this file to .env and update the values for your environment

# Application
NODE_ENV=development
PORT=8888
DOCS_PORT=8889

# Database (Primary)
DB_HOST=localhost
DB_PORT=5432
DB_NAME=payment_service
DB_USER=postgres
DB_PASSWORD=password
DB_SSL=false

# Database (Read Replica - optional, falls back to primary if not set)
DB_READ_HOST=localhost
DB_READ_PORT=5432
DB_READ_NAME=payment_service
DB_READ_USER=bahati
DB_READ_PASSWORD=password

# Connection Pools
DB_WRITE_POOL_MAX=20
DB_WRITE_POOL_MIN=5
DB_READ_POOL_MAX=50
DB_READ_POOL_MIN=10
DB_IDLE_TIMEOUT=30000
DB_CONNECTION_TIMEOUT=2000
DB_ACQUIRE_TIMEOUT=10000

# Performance & Consistency
DB_MAX_LAG_SECONDS=5
DB_READ_AFTER_WRITE_DELAY=1000
DB_HEALTH_CHECK_INTERVAL=30000
DB_HEALTH_CHECK_TIMEOUT=5000
DB_HEALTH_CHECK_RETRIES=3

# Archival
ARCHIVAL_ENABLED=true
PERFORMANCE_THRESHOLD=49999
PERFORMANCE_ARCHIVE_COUNT=20000
COMPLIANCE_RETENTION_YEARS=1
REPORTS_RETENTION_YEARS=7

# RabbitMQ
RABBITMQ_HOST=localhost
RABBITMQ_PORT=5672
RABBITMQ_USER=guest
RABBITMQ_PASS=guest
RABBITMQ_VHOST=/

# External Services
USER_SERVICE_URL=http://localhost:3004
USER_SERVICE_AUTH_TOKEN=your-auth-token-here

# =========================
# Stripe
# =========================
STRIPE_SECRET_KEY=sk_test_51SA4AzA8J37ejWqpVimXND49UnUxgtVJWFSdWFitm8FTPhd36WJ86FuIDmTSZqzxvi407kjVBjASkNKCRB7HKpNB00jrd5pgNc
STRIPE_WEBHOOK_SECRET=whsec_dc6b89f8960131902e8e8be5fecd3e32a6aff94a823f45fe287310cae67ae863
# =========================
# M-Pesa (Daraja sandbox)
# =========================
MPESA_CONSUMER_KEY=u2VB99k9fCHpGOc2w9FRAGg61FYy8UAuOeoZuJOW8uIYMRDy
MPESA_CONSUMER_SECRET=yfJAlD8buUGKWiLjkrbPEGFMgf6FhNIoX5GKfE7a6hjDJueReovzHj31OZYtnzs9
MPESA_BUSINESS_SHORTCODE=174379
MPESA_PASSKEY=bfb279f9aa9bdbcf158e97dd71a467cd2e0c893059b10f78e6b72ada1ed2c919
MPESA_ENV=sandbox
MPESA_CALLBACK_URL=https://bce65916dc25.ngrok-free.app/payments/mpesa/callback
MPESA_TIMEOUT_URL=https://bce65916dc25.ngrok.io/webhook/mpesa/timeout

# Testing
LOAD_TEST_REQUESTS=50000
BATCH_SIZE=1000
CONCURRENCY=10
API_TIMEOUT=30000

# Test Database (uses same credentials as primary)
TEST_DB_NAME=payment_service_test

# Logging
LOG_LEVEL=info
LOG_FILE=payment-service.log

# Security
JWT_SECRET=your-jwt-secret-here
ENCRYPTION_KEY=your-encryption-key-here

# Monitoring
METRICS_ENABLED=true
METRICS_PORT=9090
HEALTH_CHECK_ENABLED=true

# Feature Flags
ENABLE_ARCHIVAL=true
ENABLE_PARTITIONING=true
ENABLE_READ_REPLICA=true
ENABLE_RETRY_LOGIC=true
ENABLE_METRICS=true
